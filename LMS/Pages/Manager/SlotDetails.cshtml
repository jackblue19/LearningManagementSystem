@page
@model LMS.Pages.Manager.SlotDetailsModel
@{
    ViewData["Title"] = "Chi tiết Slot";
}

<style>
    .page-header-slot {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 2rem;
        border-radius: 12px;
        margin-bottom: 2rem;
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    .info-card {
        background: white;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        margin-bottom: 1.5rem;
        border-left: 4px solid #667eea;
    }

    .room-card {
        border: 2px solid #28a745;
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 15px;
        transition: all 0.3s;
        background: linear-gradient(135deg, #f0fff4 0%, #e6ffed 100%);
    }

    .room-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(40, 167, 69, 0.2);
    }

    .available-room-card {
        border: 2px solid #17a2b8;
        background: linear-gradient(135deg, #e7f7f9 0%, #d1f2f7 100%);
    }

    .available-room-card:hover {
        box-shadow: 0 4px 12px rgba(23, 162, 184, 0.2);
    }

    .stats-badge {
        font-size: 16px;
        padding: 10px 20px;
    }
</style>

<div class="container-fluid mt-4">
    <!-- Header -->
    <div class="page-header-slot">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h2 class="mb-2">
                    <i class="bi bi-clock-fill"></i> Chi tiết Slot @Model.SlotOrder
                </h2>
                <p class="mb-0 opacity-90">
                    @Model.DayOfWeekName, @Model.SessionDateParsed.ToString("dd/MM/yyyy") | @Model.StartTime - @Model.EndTime
                </p>
            </div>
            <a asp-page="/Manager/GlobalSchedule" class="btn btn-light btn-lg">
                <i class="bi bi-arrow-left"></i> Quay lại
            </a>
        </div>
    </div>

    <!-- Thống kê -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="info-card">
                <div class="card-body text-center">
                    <i class="bi bi-building-fill text-primary" style="font-size: 2.5rem;"></i>
                    <h3 class="mt-3 mb-1">@Model.TotalRooms</h3>
                    <p class="text-muted mb-0">Tổng số phòng</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="info-card" style="border-left-color: #28a745;">
                <div class="card-body text-center">
                    <i class="bi bi-check-circle-fill text-success" style="font-size: 2.5rem;"></i>
                    <h3 class="mt-3 mb-1">@Model.BookedRooms.Count</h3>
                    <p class="text-muted mb-0">Phòng đã đặt</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="info-card" style="border-left-color: #17a2b8;">
                <div class="card-body text-center">
                    <i class="bi bi-door-open-fill text-info" style="font-size: 2.5rem;"></i>
                    <h3 class="mt-3 mb-1">@Model.AvailableRoomsCount</h3>
                    <p class="text-muted mb-0">Phòng còn trống</p>
                </div>
            </div>
        </div>
    </div>

    @if (Model.BookedRooms.Any())
    {
        <!-- Phòng đã đặt -->
        <div class="card mb-4">
            <div class="card-header" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white;">
                <h5 class="mb-0">
                    <i class="bi bi-building-check"></i> Các phòng đã được đặt (@Model.BookedRooms.Count)
                </h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead class="table-light">
                            <tr>
                                <th style="width: 15%;">Phòng học</th>
                                <th style="width: 10%;">Sức chứa</th>
                                <th style="width: 20%;">Lớp học</th>
                                <th style="width: 25%;">Môn học</th>
                                <th style="width: 20%;">Giáo viên</th>
                                <th style="width: 10%;">Trạng thái</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var room in Model.BookedRooms)
                            {
                                <tr>
                                    <td>
                                        <strong>
                                            <i class="bi bi-door-closed-fill text-success"></i> 
                                            @room.RoomName
                                        </strong>
                                    </td>
                                    <td>
                                        <span class="badge bg-info">@room.RoomCapacity người</span>
                                    </td>
                                    <td>@room.ClassName</td>
                                    <td>@room.SubjectName</td>
                                    <td>
                                        <i class="bi bi-person-badge"></i> @room.TeacherName
                                    </td>
                                    <td>
                                        <span class="badge bg-success">Đã đặt</span>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    }

    @if (Model.AvailableRooms.Any())
    {
        <!-- Phòng còn trống -->
        <div class="card">
            <div class="card-header" style="background: linear-gradient(135deg, #17a2b8 0%, #138496 100%); color: white;">
                <h5 class="mb-0">
                    <i class="bi bi-door-open"></i> Các phòng còn trống (@Model.AvailableRooms.Count)
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    @foreach (var room in Model.AvailableRooms)
                    {
                        <div class="col-md-4 col-lg-3 mb-3">
                            <div class="available-room-card text-center">
                                <i class="bi bi-door-open-fill text-info" style="font-size: 2rem;"></i>
                                <h5 class="mt-2 mb-1">@room.RoomName</h5>
                                <p class="text-muted mb-2">Sức chứa: <strong>@room.Capacity</strong> người</p>
                                <span class="badge bg-info">Sẵn sàng</span>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    }
    else if (!Model.BookedRooms.Any())
    {
        <div class="alert alert-warning text-center">
            <i class="bi bi-exclamation-triangle-fill fs-1"></i>
            <h4 class="mt-3">Không có dữ liệu</h4>
            <p>Chưa có phòng nào được đặt trong slot này.</p>
        </div>
    }
</div>
